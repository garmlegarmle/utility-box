---
import BaseLayout from '../layouts/BaseLayout.astro';
---
<BaseLayout
  title="Choose Language"
  description="Select your language for Utility Box"
  lang="en"
  languageToggleHref="/ko/"
  canonicalPath="/"
  alternates={[
    { lang: 'en', href: '/en/' },
    { lang: 'ko', href: '/ko/' }
  ]}
>
  <script is:inline>
    (() => {
      if (typeof window === 'undefined') return;
      if (window.location.pathname !== '/') return;

      const params = new URLSearchParams(window.location.search);
      if (params.get('manual') === '1') return;

      const preferred = (navigator.languages && navigator.languages[0]) || navigator.language || 'en';
      const isKorean = preferred.toLowerCase().startsWith('ko');
      const destination = isKorean ? '/ko/' : '/en/';
      const query = window.location.search || '';

      window.location.replace(`${destination}${query}`);
    })();
  </script>
  <section class="page-section">
    <div class="container">
      <div class="page-head">
        <h1>Choose your language</h1>
        <p>Select a locale to continue.</p>
      </div>
      <div class="footer-links">
        <a class="text-link" href="/en/">English →</a>
        <a class="text-link" href="/ko/">한국어 →</a>
      </div>
    </div>
  </section>
</BaseLayout>
