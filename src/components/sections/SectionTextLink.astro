---
import type { BuilderLink } from '../../lib/section-links';
import { resolveBuilderLink } from '../../lib/section-links';

interface Props {
  link: BuilderLink;
  label?: string;
}

const { link, label } = Astro.props;
const resolved = resolveBuilderLink(link);
const text = label ?? link.label ?? '';
---
{
  resolved && text && (
    <a
      class="text-link"
      href={resolved.href}
      target={resolved.external && resolved.openInNewTab ? '_blank' : undefined}
      rel={resolved.external && resolved.openInNewTab ? 'noopener noreferrer' : undefined}
    >
      {text} <span aria-hidden="true">{resolved.external ? '↗' : '→'}</span>
      {resolved.external && <span class="visually-hidden"> (external link)</span>}
    </a>
  )
}
